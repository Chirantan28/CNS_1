// This file contains JavaScript for interactive features and animations on the web application.

document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('scan-form');
    const loading = document.getElementById('loading');
    const resultsContainer = document.getElementById('results-container');

    form.addEventListener('submit', function(event) {
        event.preventDefault();
        loading.style.display = 'block';
        resultsContainer.innerHTML = '';

        const formData = new FormData(form);
        fetch(form.action, {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            loading.style.display = 'none';
            displayResults(data);
        })
        .catch(error => {
            loading.style.display = 'none';
            console.error('Error:', error);
        });
    });

    function displayResults(data) {
        resultsContainer.innerHTML = '';
        if (data.success) {
            const results = data.results;
            results.forEach(result => {
                const resultElement = document.createElement('div');
                resultElement.classList.add('result-item');
                resultElement.innerHTML = `<h3>${result.title}</h3><p>${result.description}</p>`;
                resultsContainer.appendChild(resultElement);
            });
        } else {
            resultsContainer.innerHTML = '<p>No vulnerabilities found.</p>';
        }
    }

    // Example animation for loading state
    const loadingAnimation = document.getElementById('loading-animation');
    function showLoading() {
        loadingAnimation.style.display = 'block';
    }

    function hideLoading() {
        loadingAnimation.style.display = 'none';
    }
});